# 🎯 整时段预约功能测试指南

## 📋 测试步骤

### 1. 基础功能测试

**步骤 1.1: 进入房间详情页**
- 从房间列表页面点击任意房间
- 确认进入 `roomDetail` 页面
- 查看是否显示时段卡片（上午、中午、下午）

**步骤 1.2: 测试整时段预约按钮**
- 找到时段卡片上的 "预约整时段" 按钮
- 点击任意时段的 "预约整时段" 按钮
- **期望结果**: 直接弹出预约表单，无需选择具体时间槽

**步骤 1.3: 验证预约表单**
- 查看预约弹窗标题和时间显示
- 确认时间显示格式: `XX:XX - XX:XX (整XX时段)`
- 例如: `08:30 - 12:00 (整上午时段)`

### 2. 数据验证测试

**步骤 2.1: 控制台日志检查**
打开微信开发者工具控制台，查看日志：
```
📅 开始整时段预约: {periodId: "morning", selectedPeriod: {...}}
📝 设置整时段预约数据: {periodId: "morning", startTime: "08:30", endTime: "12:00", periodName: "上午时段"}
✅ 整时段预约数据设置完成
📋 显示预约弹窗验证: {wholePeriodBooking: {...}, selectedStartIndex: -2, selectedEndIndex: -2}
✅ 显示预约弹窗验证通过
```

**步骤 2.2: 表单提交验证**
- 填写会议主题、联系人、联系方式
- 点击"提交预约"按钮
- 查看控制台日志：
```
🔍 提交预约验证: {wholePeriodBooking: {...}, selectedStartIndex: -2, selectedEndIndex: -2}
✅ 时间选择验证通过: {hasWholePeriodBooking: true, hasSpecificTimeBooking: false}
🕒 整时段预约: {periodId: "morning", periodName: "上午时段", startTime: "08:30", endTime: "12:00"}
```

### 3. 各时段测试

**测试上午时段 (08:30-12:00)**
- 点击上午时段的"预约整时段"
- 确认时间显示: `08:30 - 12:00 (整上午时段)`

**测试中午时段 (12:00-14:30)**
- 点击中午时段的"预约整时段"
- 确认时间显示: `12:00 - 14:30 (整中午时段)`

**测试下午时段 (14:30-22:00)**
- 点击下午时段的"预约整时段"
- 确认时间显示: `14:30 - 22:00 (整下午时段)`

### 4. 混合模式测试

**测试场景**: 整时段预约和具体时间预约混合使用

**步骤 4.1**: 
1. 先点击"预约整时段" → 取消预约弹窗
2. 再点击时段卡片展开 → 选择具体时间槽
3. 确认两种模式互不冲突

**步骤 4.2**:
1. 先选择具体时间槽 → 取消预约弹窗
2. 再点击"预约整时段"
3. 确认整时段预约覆盖之前的选择

### 5. 错误处理测试

**测试不可用时段**
- 找到状态为 "unavailable" 的时段
- 点击"预约整时段"按钮
- **期望结果**: 显示"该时段暂不可用"提示

**测试部分可用时段**
- 找到状态为 "partial" 的时段
- 点击"预约整时段"按钮
- **期望结果**: 应该提供选择（预约可用部分或选择具体时间）

## 🔍 调试信息

### 关键数据结构
```javascript
// 整时段预约数据
wholePeriodBooking: {
    periodId: "morning",        // 时段ID
    startTime: "08:30",        // 开始时间
    endTime: "12:00",          // 结束时间
    periodName: "上午时段"      // 时段名称
}

// 选中状态
selectedStartIndex: -2,        // 特殊值表示整时段
selectedEndIndex: -2,          // 特殊值表示整时段
selectedTimeText: "08:30 - 12:00 (整上午时段)"
```

### 控制台日志标识
- 📅 开始整时段预约
- 📝 设置整时段预约数据
- ✅ 整时段预约数据设置完成
- 📋 显示预约弹窗验证
- 🔍 提交预约验证
- 🕒 整时段预约 / 具体时间段预约

## ⚠️ 常见问题排查

### 问题1: 点击"预约整时段"没有反应
**检查项**:
- 控制台是否有错误信息
- 时段状态是否为可用
- `onQuickBookPeriod` 方法是否正确绑定

### 问题2: 弹窗显示"请选择预约时间段"
**检查项**:
- `wholePeriodBooking` 数据是否正确设置
- `selectedStartIndex` 和 `selectedEndIndex` 是否为 -2
- 验证逻辑是否正确

### 问题3: 提交时提示选择时间段
**检查项**:
- `submitBooking` 方法的验证逻辑
- `hasWholePeriodBooking` 变量是否为 true
- 数据传递是否完整

## ✅ 测试完成标准

**所有以下功能都正常工作时，测试通过**:
1. ✅ 点击"预约整时段"按钮直接弹出预约表单
2. ✅ 预约表单显示正确的时间范围和时段名称
3. ✅ 表单验证通过，可以成功提交预约
4. ✅ 控制台日志显示正确的数据流
5. ✅ 三个时段（上午、中午、下午）都可以正常预约
6. ✅ 错误状态正确处理（不可用时段的提示）

**测试通过后，整时段预约功能完全可用！** 🎉 