<!-- ЁЯОи Apple iOS Design - ф╝ЪшооходхИЧшбищб╡щЭв -->
<view class="ios-app-container">
  <!-- iOS щгОца╝хп╝шИкцаП -->
  <view class="ios-navbar" style="padding-top: {{statusBarHeight}}px;">
    <view class="navbar-content">
      <view class="nav-left" bindtap="goToMyBookings">
        <view class="nav-button">
          <image class="nav-icon" src="/images/icons/booking.png" mode="aspectFit"></image>
        </view>
      </view>
      <text class="nav-title">ф╝ЪшооходхИЧшби</text>
      <view class="nav-right" bindtap="goToAdminPanel" wx:if="{{isAdmin}}">
        <view class="nav-button">
          <image class="nav-icon" src="/images/icons/admin.png" mode="aspectFit"></image>
        </view>
      </view>
      <view class="nav-right" wx:else></view>
    </view>
  </view>

  <!-- цРЬч┤вцаП - ш░ГцХ┤ф╜Нч╜о -->
  <view class="search-section" style="top: {{statusBarHeight + 44}}px;">
    <view class="search-bar">
      <image class="search-icon" src="/images/icons/search.png" mode="aspectFit"></image>
      <input
        class="search-input"
        placeholder="цРЬч┤вф╝Ъшооход"
        placeholder-class="search-placeholder"
        confirm-type="search"
        bindinput="onSearchInput"
        bindconfirm="onSearchConfirm"
        value="{{searchKeyword}}"
      />
      <view wx:if="{{searchKeyword}}" class="clear-button" bindtap="clearSearch">
        <image class="clear-icon" src="/images/icons/close.png" mode="aspectFit"></image>
      </view>
    </view>
    
    <!-- чнЫщАЙцМЙщТо -->
    <view class="filter-button" bindtap="showFilterOptions">
      <image class="filter-icon" src="/images/icons/filter.png" mode="aspectFit"></image>
    </view>
  </view>

  <!-- ф╕╗шжБхЖЕхо╣хМ║хЯЯ -->
  <view class="main-content" style="padding-top: {{statusBarHeight + 56}}px;">
    
    <!-- хКаш╜╜чК╢цАБ -->
    <view wx:if="{{loading}}" class="loading-view">
      <view class="ios-activity-indicator">
        <view class="spinner"></view>
        <text class="loading-label">цнгхЬихКаш╜╜...</text>
      </view>
    </view>

    <!-- чй║чК╢цАБ -->
    <view wx:elif="{{!loading && rooms.length === 0}}" class="empty-view">
      <view class="empty-content">
        <view class="empty-icon">
          <image class="empty-image" src="/images/icons/empty.png" mode="aspectFit"></image>
        </view>
        <text class="empty-title">{{searchKeyword ? 'цЬкцЙ╛хИ░чЫ╕хЕ│ф╝Ъшооход' : 'цЪВцЧаф╝Ъшооход'}}</text>
        <text class="empty-subtitle">{{searchKeyword ? 'шп╖х░ЭшпХхЕ╢ф╗ЦхЕ│щФошпН' : 'ф╕ЛцЛЙхИ╖цЦ░цИЦшБФч│╗чобчРЖхСШ'}}</text>
        <button wx:if="{{searchKeyword}}" class="ios-button secondary" bindtap="clearSearch">
          ц╕ЕщЩдцРЬч┤в
        </button>
      </view>
    </view>

    <!-- ф╝ЪшооходхИЧшби -->
    <scroll-view
      wx:else
      class="room-list"
      scroll-y
      bindscrolltolower="onReachBottom"
      refresher-enabled="{{true}}"
      refresher-triggered="{{refreshing}}"
      bindrefresherrefresh="onRefresh"
    >
      <view class="room-grid">
        <view wx:for="{{rooms}}" wx:key="id" 
              class="room-card-wrapper" 
              data-room="{{item}}"
              bindtap="goToRoomDetail">
          
          <view class="room-card">
            <!-- цИ┐щЧ┤хЫ╛чЙЗ -->
            <view class="room-image-container">
              <image 
                wx:if="{{!item.imageError}}"
                class="room-image" 
                src="{{item.displayImage}}" 
                mode="aspectFill" 
                lazy-load
                binderror="onImageError"
                bindload="onImageLoad"
                data-room-id="{{item.id}}"
              />
              <view wx:else class="room-image-placeholder">
                <image class="placeholder-icon" src="/images/icons/image-placeholder.png" mode="aspectFit"></image>
              </view>
              
              <!-- чК╢цАБцМЗчд║хЩи -->
              <view class="availability-indicator {{item.status === 'available' ? 'available' : 'occupied'}}">
                <text class="indicator-dot"></text>
              </view>
              
              <!-- чК╢цАБцаЗчн╛ -->
              <view class="status-chip image-status-chip {{item.status === 'available' ? 'available' : 'occupied'}}">
                <text class="status-text">{{item.status === 'available' ? 'хПпщвДч║ж' : 'х╖▓хНачФи'}}</text>
              </view>
            </view>

            <!-- цИ┐щЧ┤ф┐бцБп -->
            <view class="room-info">
              <view class="room-header">
                <text class="room-name">{{item.name}}</text>
                <view class="capacity-badge">
                  <image class="capacity-icon" src="/images/icons/people.png" mode="aspectFit"></image>
                  <text class="capacity-text">{{item.capacity}}</text>
                </view>
              </view>
              
              <view class="room-location">
                <image class="location-icon" src="/images/icons/location.png" mode="aspectFit"></image>
                <text class="location-text">{{item.location}}</text>
              </view>
              
              <text class="room-description">{{item.description || 'цЪВцЧацППш┐░'}}</text>
              
              <!-- х║ХщГишбМхКихМ║хЯЯ -->
              <view class="room-actions">
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- хКаш╜╜цЫ┤хдЪ -->
      <view wx:if="{{loadingMore}}" class="loading-more">
        <view class="mini-spinner"></view>
        <text class="loading-more-text">цнгхЬихКаш╜╜цЫ┤хдЪ...</text>
      </view>

      <!-- х║ХщГищЧ┤ш╖Э -->
      <view class="bottom-spacing"></view>
    </scroll-view>
  </view>

</view> 