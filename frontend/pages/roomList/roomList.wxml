<!-- ЁЯОи Apple iOS Design - ф╝ЪшооходхИЧшбищб╡щЭв -->
<view class="ios-app-container">
  <!-- iOS щгОца╝хп╝шИкцаП -->
  <view class="ios-navbar" style="padding-top: {{statusBarHeight}}px;">
    <view class="navbar-content">
      <view class="nav-left"></view>
      <text class="nav-title">ф╝ЪшооходщвДшов</text>
      <view class="nav-right" bindtap="goToAdminPanel" wx:if="{{isAdmin}}">
        <view class="nav-button">
          <image class="nav-icon" src="/images/icons/admin.png" mode="aspectFit"></image>
        </view>
      </view>
      <view class="nav-right" wx:else></view>
    </view>
  </view>

  <!-- цРЬч┤вцаП - ш░ГцХ┤ф╜Нч╜о -->
  <view class="search-section" style="top: {{statusBarHeight + 44}}px;">
    <view class="search-bar">
      <image class="search-icon" src="/images/icons/search.png" mode="aspectFit"></image>
      <input
        class="search-input"
        placeholder="цРЬч┤вф╝Ъшооход"
        placeholder-class="search-placeholder"
        confirm-type="search"
        bindinput="onSearchInput"
        bindconfirm="onSearchConfirm"
        value="{{searchKeyword}}"
      />
      <view wx:if="{{searchKeyword}}" class="clear-button" bindtap="clearSearch">
        <image class="clear-icon" src="/images/icons/close.png" mode="aspectFit"></image>
      </view>
    </view>
    
    <!-- чнЫщАЙцМЙщТо -->
    <view class="filter-button" bindtap="showFilterOptions">
      <image class="filter-icon" src="/images/icons/filter.png" mode="aspectFit"></image>
    </view>
  </view>

  <!-- ф╕╗шжБхЖЕхо╣хМ║хЯЯ -->
  <view class="main-content" style="padding-top: {{statusBarHeight + 104}}px;">
    
    <!-- хКаш╜╜чК╢цАБ -->
    <view wx:if="{{loading}}" class="common-loading">
      <view class="common-loading-spinner"></view>
      <text class="common-loading-text">цнгхЬихКаш╜╜...</text>
    </view>

    <!-- чй║чК╢цАБ -->
    <view wx:elif="{{!loading && rooms.length === 0}}" class="empty-view">
      <view class="empty-content">
        <view class="empty-icon">
          <image class="empty-image" src="/images/icons/empty.png" mode="aspectFit"></image>
        </view>
        <text class="empty-title">{{searchKeyword ? 'цЬкцЙ╛хИ░чЫ╕хЕ│ф╝Ъшооход' : 'цЪВцЧаф╝Ъшооход'}}</text>
        <text class="empty-subtitle">{{searchKeyword ? 'шп╖х░ЭшпХхЕ╢ф╗ЦхЕ│щФошпН' : 'ф╕ЛцЛЙхИ╖цЦ░цИЦшБФч│╗чобчРЖхСШ'}}</text>
        <button wx:if="{{searchKeyword}}" class="ios-button secondary" bindtap="clearSearch">
          ц╕ЕщЩдцРЬч┤в
        </button>
      </view>
    </view>

    <!-- ф╝ЪшооходхИЧшби -->
    <view wx:else class="content-wrapper">
      <!-- ф╝ЪшооходхИЧшбицаЗщвШ -->
      <view class="section-header">
        <text class="section-title">ф╝ЪшооходхИЧшби</text>
        <text class="section-subtitle">хЕ▒{{rooms.length}}щЧ┤ф╝Ъшооход</text>
      </view>

      <!-- ф╝ЪшооходхИЧшби - чз╗щЩдscroll-viewщЩРхИ╢я╝МшойхИЧшбишЗкчД╢х▒Хх╝А -->
      <view class="room-list">
        <view class="room-grid">
          <view wx:for="{{rooms}}" wx:key="id" 
                class="room-card-wrapper" 
                data-room="{{item}}"
                bindtap="goToRoomDetail">
            
            <view class="room-card">
              <!-- цИ┐щЧ┤хЫ╛чЙЗ -->
              <view class="room-image-container">
                <image 
                  wx:if="{{!item.imageError}}"
                  class="room-image" 
                  src="{{item.displayImage}}" 
                  mode="aspectFill" 
                  lazy-load
                  binderror="onImageError"
                  bindload="onImageLoad"
                  data-room-id="{{item.id}}"
                />
                <view wx:else class="room-image-placeholder">
                  <image class="placeholder-icon" src="/images/icons/image-placeholder.png" mode="aspectFit"></image>
                </view>
                
                <!-- чК╢цАБцаЗчн╛ -->
                <view class="status-chip image-status-chip {{item.status === 'available' ? 'available' : 'occupied'}}">
                  <text class="status-text">{{item.status === 'available' ? 'хПпщвДч║ж' : 'х╖▓хНачФи'}}</text>
                </view>
              </view>

              <!-- цИ┐щЧ┤ф┐бцБп - ч▓╛чоАчЙИ -->
              <view class="room-info">
                <view class="room-header">
                  <text class="room-name">{{item.name}}</text>
                  <view class="capacity-badge">
                    <image class="capacity-icon" src="/images/icons/people.png" mode="aspectFit"></image>
                    <text class="capacity-text">{{item.capacity}}ф║║</text>
                  </view>
                </view>
                
                <view class="room-location">
                  <image class="location-icon" src="/images/icons/location.png" mode="aspectFit"></image>
                  <text class="location-text">{{item.location}}</text>
                </view>
                
                <text class="room-description">{{item.description || 'чО░ф╗гхМЦф╝Ъшооходя╝МщЕНхдЗхоМхЦДшо╛цЦ╜'}}</text>
                
                <!-- шо╛хдЗцаЗчн╛ - ф┐ЭчХЩшо╛хдЗф┐бцБпя╝Мш┐Щф╕кцЬЙчФи -->
                <view wx:if="{{item.equipment && item.equipment.length > 0}}" class="equipment-tags">
                  <view wx:for="{{item.equipment}}" wx:key="*this" 
                        wx:for-item="equipment"
                        class="equipment-tag">
                    <text class="equipment-text">{{equipment}}</text>
                  </view>
                </view>
              </view>
            </view>
          </view>
        </view>

        <!-- хКаш╜╜цЫ┤хдЪ -->
        <view wx:if="{{loadingMore}}" class="loading-more">
          <view class="mini-spinner"></view>
          <text class="loading-more-text">цнгхЬихКаш╜╜цЫ┤хдЪ...</text>
        </view>

        <!-- х║ХщГищЧ┤ш╖Э -->
        <view class="bottom-spacing"></view>
      </view>
    </view>

  </view>

</view> 